<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
  </head>
  <body>
    <script type="text/javascript">
      function toDataUrl(src, callback) {
        var image = new Image();
        image.crossOrigin = "Anonymous";

        image.onload = function() {
          var canvas = document.createElement("canvas");
          var content = canvas.getContext("2d");
          canvas.height = this.naturalHeight;
          canvas.width = this.naturalWidth;
          context.drawImage(this, 0, 0);
          var dataURL = canvas.toDataURL("image/jpeg");
          callback(dataURL);
        };

        image.src = src;
      }

      toDataUrl("https://gravatar.com/avatar", function(dataURL) {
        document.getElementById("result").innerHTML = dataURL;
      });
    </script>
  </body>
</html>
